(function(){function e(e){let t={};return e.forEach(e=>{let n=[],r=``;for(let t of e.name)r+=t,r.length>=25&&(n.push(r),r=``);r&&n.push(r),t[e.id]=n}),t}function t(e,t){let n={};return e.forEach(e=>{let r=e.incomingCount+e.outgoingCount||1;n[e.id]=Math.sqrt(r)*t}),n}let n=null,r=null,i=null;function a(e,t,n,r,i){let a=(n||``).trim(),o=(r||[]).filter(e=>typeof e==`string`&&e in i),s=new Set,c=null;if(a!==``){let n=e.find(e=>e.name===a);if(n){s.add(n.id),c=n.id;let e=new Map;t.forEach(t=>{e.has(t.source)||e.set(t.source,[]),e.has(t.target)||e.set(t.target,[]),e.get(t.source).push(t),e.get(t.target).push(t)}),e.get(n.id)?.forEach(e=>{s.add(e.source===n.id?e.target:e.source)})}else return{filteredNodeIds:[],filteredLinkIds:[],searchedNodeId:null}}if(o.length>0){let e=new Set;o.forEach(t=>{(i[t]||[]).forEach(t=>{e.add(t)})}),s=a===``?e:new Set(Array.from(s).filter(t=>e.has(t)||t===c))}let l=Array.from(s),u=[];return t.forEach(e=>{s.has(e.source)&&s.has(e.target)&&u.push(`${e.source}|${e.target}`)}),{filteredNodeIds:l,filteredLinkIds:u,searchedNodeId:c}}self.onmessage=o=>{let s=o.data,{taskId:c,type:l}=s;try{if(l===`filter`){let e=s;if(e.searchTerm.trim()===``&&e.selectedTags.length===0){if(n){self.postMessage({taskId:c,result:n});return}let t=a(e.nodes,e.links,e.searchTerm,e.selectedTags,e.tagIndexCache);n=t,self.postMessage({taskId:c,result:t})}else{let t=a(e.nodes,e.links,e.searchTerm,e.selectedTags,e.tagIndexCache);self.postMessage({taskId:c,result:t})}}else if(l===`textCache`){let t=s;if(r){self.postMessage({taskId:c,result:{textLineCache:r}});return}r=e(t.nodes),self.postMessage({taskId:c,result:{textLineCache:r}})}else if(l===`nodeSize`){let e=s;if(i){self.postMessage({taskId:c,result:{nodeSizeCache:i}});return}i=t(e.nodes,e.nodeSizeMultiplier),self.postMessage({taskId:c,result:{nodeSizeCache:i}})}}catch(e){self.postMessage({taskId:c,error:e instanceof Error?e.message:`Unknown error`})}}})();
//# sourceMappingURL=worker-BJVvHgq-.js.map